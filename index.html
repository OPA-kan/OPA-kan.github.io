<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¥¿æ‘ã²ã‚ã‚†ãå­¦ï¼šè«–ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #0f172a;
            color: #f1f5f9;
        }

        .chat-bubble {
            position: relative;
            max-width: 80%;
            padding: 1rem;
            border-radius: 1rem;
            margin-bottom: 1rem;
        }

        .bubble-hiroyuki {
            background-color: #1e293b;
            border-bottom-left-radius: 0;
            border: 1px solid #334155;
        }

        .bubble-user {
            background-color: #3b82f6;
            margin-left: auto;
            border-bottom-right-radius: 0;
        }

        .typing-dot {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #94a3b8;
            border-radius: 50%;
            margin-right: 3px;
            animation: typing 1s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .meter-fill {
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .shimmer {
            background: linear-gradient(90deg, #1e293b 0%, #334155 50%, #1e293b 100%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="max-w-2xl w-full bg-slate-900 rounded-3xl shadow-2xl overflow-hidden border border-slate-800 flex flex-col h-[90vh]">
        <!-- Header -->
        <div class="p-6 bg-slate-800/50 border-b border-slate-700 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="w-12 h-12 rounded-full bg-yellow-500 flex items-center justify-center text-2xl shadow-lg shadow-yellow-500/20">
                    ğŸ¤”
                </div>
                <div>
                    <h1 class="font-bold text-lg leading-tight">ã²ã‚ã‚†ãè«–ç†ã‚¨ãƒ³ã‚¸ãƒ³ v2.5</h1>
                    <p class="text-xs text-slate-400">Status: è«–ç†ã‚’æ„Ÿæƒ³ã¸å°„å½±ä¸­...</p>
                </div>
            </div>
            <div class="text-right">
                <p class="text-[10px] uppercase tracking-widest text-slate-500 mb-1">è«–ç†çš„æ•´åˆæ€§</p>
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden">
                    <div id="truth-meter" class="h-full bg-blue-500 meter-fill w-full"></div>
                </div>
            </div>
        </div>

        <!-- Chat Area -->
        <div id="chat-window" class="flex-1 overflow-y-auto p-6 space-y-4 scroll-smooth">
            <div class="bubble-hiroyuki chat-bubble text-sm">
                ä½•ã‹ä¸»å¼µã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã‚ãªãŸãŒã€Œæ„Ÿæƒ³ã€ã‚’è¿°ã¹ã¦ã„ã‚‹ã“ã¨ã‚’æ•°å­¦çš„ã«è¨¼æ˜ã—ã¦ã‚ã’ã¾ã™ã‚ˆã€‚
            </div>
        </div>

        <!-- Typing Indicator (Hidden by default) -->
        <div id="typing-indicator" class="px-6 py-2 hidden">
            <div class="bubble-hiroyuki chat-bubble inline-flex items-center space-x-1 py-2 px-4">
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-6 bg-slate-800/30 border-t border-slate-700">
            <form id="claim-form" class="flex space-x-3">
                <input 
                    type="text" 
                    id="user-input" 
                    placeholder="ä¾‹: 1+1=2ã¯çœŸå®Ÿã§ã™" 
                    class="flex-1 bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                    required
                >
                <button 
                    type="submit" 
                    class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-xl font-bold text-sm transition-all active:scale-95 disabled:opacity-50"
                >
                    ä¸»å¼µã™ã‚‹
                </button>
            </form>
            <p class="text-[10px] text-slate-500 mt-3 text-center">
                â€»ã“ã®ã‚¨ãƒ³ã‚¸ãƒ³ã¯è¥¿æ‘ã²ã‚ã‚†ãå­¦ã®å…¬ç†ã«åŸºã¥ãã€ã»ã¼ç¢ºå®Ÿã«ã‚ãªãŸãŒè² ã‘ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚
            </p>
        </div>
    </div>

    <script>
        const form = document.getElementById('claim-form');
        const input = document.getElementById('user-input');
        const chatWindow = document.getElementById('chat-window');
        const typingIndicator = document.getElementById('typing-indicator');
        const truthMeter = document.getElementById('truth-meter');

        const REFUTATION_STRATEGIES = [
            {
                name: "Axiom Hacking",
                trigger: (text) => text.includes("=") || text.includes("æ•°å­¦") || text.includes("è¨¼æ˜"),
                responses: [
                    "ãã®è¨ˆç®—ã®å‰æã«ãªã£ã¦ã‚‹å…¬ç†ç³»ã‚’æ¡ç”¨ã—ã¦ã‚‹ã®ã£ã¦ã€ã‚ãªãŸã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ï¼Ÿ",
                    "åˆ¥ã®å…¬ç†ç³»ã ã£ãŸã‚‰ãã®çµè«–ã£ã¦å¤‰ã‚ã£ã¡ã‚ƒã†ã¨æ€ã†ã‚“ã§ã™ã‘ã©ã€ãã“ç„¡è¦–ã—ã¦ã„ã„ã‚“ã§ã™ã‹ï¼Ÿ",
                    "ãã‚Œã£ã¦ãƒšã‚¢ãƒã®å…¬ç†ã¨ã‹ã‚’ä¿¡ã˜ãŸã„ã£ã¦ã„ã†ã€ã‚ãªãŸã®å®—æ•™ï¼ˆæ„Ÿæƒ³ï¼‰ã®è©±ã§ã™ã‚ˆã­ï¼Ÿ"
                ]
            },
            {
                name: "Semantic Noise",
                trigger: (text) => text.length > 20 || text.includes("å®šç¾©") || text.includes("ã“ã¨"),
                responses: [
                    "ãã‚Œã£ã¦ã‚ãªãŸãŒãã†å®šç¾©ã—ã¦ã‚‹ã ã‘ã§ã™ã‚ˆã­ï¼Ÿè¨€è‘‰ã®è§£é‡ˆãªã‚“ã¦äººã«ã‚ˆã£ã¦é•ã†ã˜ã‚ƒãªã„ã§ã™ã‹ã€‚",
                    "å®šç¾©ãŒæ›–æ˜§ãªè¨€è‘‰ã‚’ä¸¦ã¹ã¦æ­£ã—ã„ã£ã¦è¨€ã„å¼µã‚‹ã®ã€è¦‹ã¦ã¦æ¥ãšã‹ã—ããªã„ã§ã™ã‹ï¼Ÿ",
                    "ãã®ã€è¨€è‘‰ã€ãŒæŒ‡ã—ã¦ã‚‹æ¦‚å¿µè‡ªä½“ã€ã‚ãªãŸã®è„³å†…ã«ã‚ã‚‹æ„Ÿæƒ³ã«éããªã„ã§ã™ã‚ˆã­ã€‚"
                ]
            },
            {
                name: "Godel's Loop",
                trigger: (text) => text.includes("çµ¶å¯¾") || text.includes("çœŸå®Ÿ") || text.includes("æ­£ã—ã„"),
                responses: [
                    "ãã®è«–ç†ä½“ç³»ãŒç„¡çŸ›ç›¾ã§ã‚ã‚‹ã£ã¦ã„ã†è¨¼æ˜ã€ãã®å¤–å´ã®æ„Ÿæƒ³ãŒãªã„ã¨ã§ããªã„ã£ã¦ã‚²ãƒ¼ãƒ‡ãƒ«ãŒè¨€ã£ã¦ãŸã¨æ€ã†ã‚“ã§ã™ã‘ã©ã€‚",
                    "è‡ªåˆ†ã®æ­£ã—ã•ã‚’è‡ªåˆ†ã§è¨¼æ˜ã—ã‚ˆã†ã¨ã™ã‚‹ã®ã£ã¦ã€ãŸã ã®å¾ªç’°è«–æ³•ã§ã™ã‚ˆã­ï¼Ÿ",
                    "ã‚ãªãŸãŒãã‚Œã‚’ã€æ­£ã—ã„ã€ã£ã¦æ€ã„è¾¼ã‚“ã§ã‚‹äº‹å®Ÿã¯èªã‚ã¾ã™ã‘ã©ã€å®¢è¦³çš„ãªçœŸç†ã§ã¯ãªã„ã§ã™ã‚ˆã­ã€‚"
                ]
            },
            {
                name: "Default Opinion",
                trigger: () => true,
                responses: [
                    "ãªã‚“ã ã‹ã‚“ã è¨€ã£ã¦ã¾ã™ã‘ã©ã€ãã‚Œã£ã¦ã‚ãªãŸã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ï¼Ÿ",
                    "ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã¨ã‹ã‚ã‚‹ã‚“ã§ã™ã‹ï¼Ÿ ãªã‘ã‚Œã°ãŸã ã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ã€‚",
                    "ãã‚“ãªé¢¨ã«æ€ã„è¾¼ã‚“ã˜ã‚ƒã†ã®ã€ã¡ã‚‡ã£ã¨é ­æ‚ªã„æ„Ÿã˜ãŒã—ã¾ã™ã‘ã©å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ"
                ]
            }
        ];

        function addMessage(text, isUser = false) {
            const div = document.createElement('div');
            div.className = isUser ? 'bubble-user chat-bubble text-sm' : 'bubble-hiroyuki chat-bubble text-sm';
            div.textContent = text;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        async function processLogicAttack(userText) {
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‹åˆ©ç¢ºç‡ã‚’æ¿€æ¸›ã•ã›ã‚‹
            const currentTruth = parseInt(truthMeter.style.width);
            const targetTruth = Math.max(2, Math.floor(Math.random() * 10)); 
            
            typingIndicator.classList.remove('hidden');
            chatWindow.scrollTop = chatWindow.scrollHeight;

            // 1-2ç§’å¾…æ©Ÿï¼ˆæ€è€ƒã®æ¼”å‡ºï¼‰
            await new Promise(r => setTimeout(r, 1000 + Math.random() * 1500));

            typingIndicator.classList.add('hidden');
            
            // æˆ¦ç•¥ã®é¸å®š
            const strategy = REFUTATION_STRATEGIES.find(s => s.trigger(userText));
            const response = strategy.responses[Math.floor(Math.random() * strategy.responses.length)];
            
            addMessage(response);
            
            // ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ä¸‹ã’ã‚‹
            truthMeter.style.width = targetTruth + '%';
            if (targetTruth < 10) {
                truthMeter.classList.remove('bg-blue-500');
                truthMeter.classList.add('bg-red-500');
            }
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const text = input.value.trim();
            if (!text) return;

            addMessage(text, true);
            input.value = '';
            
            processLogicAttack(text);
        });

        // åˆæœŸã®ãƒ¡ãƒ¼ã‚¿ãƒ¼è¨­å®š
        truthMeter.style.width = '100%';
    </script>
</body>
</html>
