<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>è¥¿æ‘ã²ã‚ã‚†ãå­¦ï¼šè«–ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ v2.5 | è¥¿æ‘ã²ã‚ã‚†ãå†™åƒã®å®Ÿè£…</title>
    <meta name="description" content="è¥¿æ‘ã²ã‚ã‚†ãå†™åƒ f ã‚’ç”¨ã„ãŸè«–ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã€‚ã‚ã‚‰ã‚†ã‚‹ä¸»å¼µã‚’ã€æ„Ÿæƒ³ã€ã«è½ã¨ã—è¾¼ã‚€ã‚¨ãƒ”å°„ã®æ€§è³ªã‚’ä½“é¨“ã—ã¦ãã ã•ã„ã€‚">
    <meta name="keywords" content="è¥¿æ‘ã²ã‚ã‚†ã, ã²ã‚ã‚†ãå†™åƒ, åœè«–, è«–ç†å­¦, ä¸å‹•ç‚¹, ãƒŸãƒ©ãƒ¼ãƒã‚¦ã‚¹">
    <meta property="og:title" content="è¥¿æ‘ã²ã‚ã‚†ãå­¦ï¼šè«–ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ v2.5">
    <meta property="og:description" content="ã‚ãªãŸã®ä¸»å¼µã‚’å®¢è¦³çš„äº‹å®Ÿã‹ã‚‰ä¸»è¦³çš„æ„Ÿæƒ³ã¸å¼·åˆ¶å°„å½±ã—ã¾ã™ã€‚">
    <meta property="og:url" content="https://opa-kan.github.io/">
    <meta property="og:type" content="website">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #0f172a;
            color: #f1f5f9;
        }

        .chat-bubble {
            position: relative;
            max-width: 80%;
            padding: 1rem;
            border-radius: 1rem;
            margin-bottom: 1rem;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bubble-hiroyuki { background-color: #1e293b; border-bottom-left-radius: 0; border: 1px solid #334155; }
        .bubble-user { background-color: #3b82f6; margin-left: auto; border-bottom-right-radius: 0; }

        .mirror-effect { border: 2px solid #a855f7; box-shadow: 0 0 15px #a855f7; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        .typing-dot { display: inline-block; width: 6px; height: 6px; background-color: #94a3b8; border-radius: 50%; margin-right: 3px; animation: typing 1s infinite ease-in-out; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

        .meter-fill { transition: width 0.8s cubic-bezier(0.65, 0, 0.35, 1); }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="max-w-2xl w-full bg-slate-900 rounded-3xl shadow-2xl overflow-hidden border border-slate-800 flex flex-col h-[90vh]">
        <header class="p-6 bg-slate-800/50 border-b border-slate-700 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="w-12 h-12 rounded-full bg-yellow-500 flex items-center justify-center text-2xl shadow-lg shadow-yellow-500/20">ğŸ¤”</div>
                <div>
                    <h1 class="font-bold text-lg leading-tight">ã²ã‚ã‚†ãè«–ç†ã‚¨ãƒ³ã‚¸ãƒ³ v2.5</h1>
                    <p id="status-text" class="text-xs text-slate-400">Status: è«–ç†ã‚’æ„Ÿæƒ³ã¸å°„å½±ä¸­...</p>
                </div>
            </div>
            <div class="text-right">
                <p class="text-[10px] uppercase tracking-widest text-slate-500 mb-1">è«–ç†çš„æ•´åˆæ€§</p>
                <div class="w-24 h-2 bg-slate-700 rounded-full overflow-hidden">
                    <div id="truth-meter" class="h-full bg-blue-500 meter-fill w-full"></div>
                </div>
            </div>
        </header>

        <main id="chat-window" class="flex-1 overflow-y-auto p-6 space-y-4 scroll-smooth">
            <div class="bubble-hiroyuki chat-bubble text-sm">
                ä½•ã‹ä¸»å¼µã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã‚ãªãŸãŒã€Œæ„Ÿæƒ³ã€ã‚’è¿°ã¹ã¦ã„ã‚‹ã“ã¨ã‚’ã€è¥¿æ‘ã²ã‚ã‚†ãå†™åƒ $f$ ã«åŸºã¥ã„ã¦è¨¼æ˜ã—ã¦ã‚ã’ã¾ã™ã‚ˆã€‚
            </div>
        </main>

        <div id="typing-indicator" class="px-6 py-2 hidden">
            <div class="bubble-hiroyuki chat-bubble inline-flex items-center space-x-1 py-2 px-4">
                <span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>
            </div>
        </div>

        <div id="share-area" class="px-6 py-3 bg-slate-800/20 flex items-center justify-center space-x-4 border-t border-slate-800/50">
            <span class="text-[10px] text-slate-500 uppercase tracking-widest">çµæœã‚’å…±æœ‰:</span>
            <button onclick="shareOnX()" class="text-white hover:text-blue-400 transition-colors"><i class="fa-brands fa-x-twitter text-xl"></i></button>
            <button onclick="shareOnLine()" class="text-white hover:text-green-400 transition-colors"><i class="fa-brands fa-line text-xl"></i></button>
        </div>

        <footer class="p-6 bg-slate-800/30 border-t border-slate-700">
            <form id="claim-form" class="flex space-x-3">
                <input 
                    type="text" id="user-input" placeholder="ä¾‹: ç§ã®æ„Ÿæƒ³ã§ã™ãŒã€1+1=2ã§ã™" 
                    class="flex-1 bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                    required
                >
                <button type="submit" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-xl font-bold text-sm transition-all active:scale-95">ä¸»å¼µã™ã‚‹</button>
            </form>
        </footer>
    </div>

    <script>
        const form = document.getElementById('claim-form');
        const input = document.getElementById('user-input');
        const chatWindow = document.getElementById('chat-window');
        const typingIndicator = document.getElementById('typing-indicator');
        const truthMeter = document.getElementById('truth-meter');
        const statusText = document.getElementById('status-text');

        let lastResponse = "";
        let currentTruthPercent = 100;

        const STRATEGIES = [
            { name: "Mirror", trigger: (t) => t.includes("æ„Ÿæƒ³ã§ã™ã‚ˆã­"), responses: ["ã€Œãã‚Œã£ã¦ã‚ãªãŸã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ã€ã£ã¦ã€ã¾ã•ã«ä»Šã®ã‚ãªãŸã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ï¼Ÿ", "ç„¡é™ãƒ«ãƒ¼ãƒ—ã«å…¥ã‚ŠãŸã„ã‚“ã§ã™ã‹ï¼Ÿ ãã‚Œã£ã¦ã‚ãªãŸã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ï¼Ÿ"], effect: "mirror" },
            { name: "FixedPoint", trigger: (t) => t.includes("ç§ã®æ„Ÿæƒ³") || t.includes("å€‹äººçš„ã«ã¯"), responses: ["ã‚ã€è‡ªåˆ†ã§æ„Ÿæƒ³ã ã£ã¦èªã‚ã¡ã‚ƒã†ã‚“ã§ã™ã­ã€‚ãã‚Œãªã‚‰æ­£ã—ã„ã§ã™ã€‚ã¯ã„ã€‚çµ‚äº†ã§ã™ã€‚", "ãã†ã§ã™ã­ã€‚æ„Ÿæƒ³ã ã¨èªã‚ã‚‹ãªã‚‰ã€ãã‚Œã¯ã‚ãªãŸã®ä¸­ã§ã¯çœŸå®Ÿãªã‚“ã§ã—ã‚‡ã†ã­ã€‚"], effect: "fixed-point" },
            { name: "Logic", trigger: (t) => t.includes("=") || t.includes("ãƒ‡ãƒ¼ã‚¿") || t.includes("çœŸå®Ÿ"), responses: ["ãã®è¨ˆç®—ã®å‰æã«ãªã£ã¦ã‚‹å…¬ç†ç³»ã‚’æ¡ç”¨ã—ã¦ã‚‹ã®ã£ã¦ã€ã‚ãªãŸã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ï¼Ÿ", "ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã¨ã‹ã‚ã‚‹ã‚“ã§ã™ã‹ï¼Ÿ ãªã‘ã‚Œã°ãŸã ã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ã€‚"], effect: "drop" },
            { name: "Default", trigger: () => true, responses: ["ãªã‚“ã ã‹ã‚“ã è¨€ã£ã¦ã¾ã™ã‘ã©ã€ãã‚Œã£ã¦ã‚ãªãŸã®æ„Ÿæƒ³ã§ã™ã‚ˆã­ï¼Ÿ", "ãã‚“ãªé¢¨ã«æ€ã„è¾¼ã‚“ã˜ã‚ƒã†ã®ã€ã¡ã‚‡ã£ã¨é ­æ‚ªã„æ„Ÿã˜ãŒã—ã¾ã™ã‘ã©å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ"], effect: "drop" }
        ];

        function addMessage(text, isUser = false, isMirror = false) {
            const div = document.createElement('div');
            div.className = isUser ? 'bubble-user chat-bubble text-sm' : 'bubble-hiroyuki chat-bubble text-sm';
            if (isMirror) div.classList.add('mirror-effect');
            div.textContent = text;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
            if (!isUser) lastResponse = text;
        }

        async function processLogicAttack(userText) {
            typingIndicator.classList.remove('hidden');
            chatWindow.scrollTop = chatWindow.scrollHeight;
            await new Promise(r => setTimeout(r, 800 + Math.random() * 1000));
            typingIndicator.classList.add('hidden');
            
            const strategy = STRATEGIES.find(s => s.trigger(userText));
            const response = strategy.responses[Math.floor(Math.random() * strategy.responses.length)];
            
            let targetTruth, isMirror = false;
            if (strategy.effect === "mirror") { targetTruth = 50; isMirror = true; statusText.textContent = "Status: å†å¸°ãƒ«ãƒ¼ãƒ—ã‚’æ¤œçŸ¥..."; }
            else if (strategy.effect === "fixed-point") { targetTruth = 100; statusText.textContent = "Status: ä¸å‹•ç‚¹ã«åˆ°é”ã€‚"; }
            else { targetTruth = Math.floor(Math.random() * 15); statusText.textContent = "Status: è«–ç†ã‚’æ„Ÿæƒ³ã¸å°„å½±ä¸­..."; }

            currentTruthPercent = targetTruth;
            addMessage(response, false, isMirror);
            truthMeter.style.width = targetTruth + '%';
            truthMeter.className = `h-full meter-fill ${targetTruth > 80 ? 'bg-green-500' : targetTruth < 20 ? 'bg-red-500' : 'bg-blue-500'}`;
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const text = input.value.trim();
            if (!text) return;
            addMessage(text, true);
            input.value = '';
            processLogicAttack(text);
        });

        // SNS Share Functions
        const SHARE_URL = "https://opa-kan.github.io/";
        
        function getShareText() {
            return `ã€ã²ã‚ã‚†ãè«–ç†ã‚¨ãƒ³ã‚¸ãƒ³ v2.5ã€‘\nè«–ç†çš„æ•´åˆæ€§: ${currentTruthPercent}%\nã²ã‚ã‚†ãã€Œ${lastResponse}ã€\n\nè¥¿æ‘ã²ã‚ã‚†ãå†™åƒ f ã«ã‚ˆã£ã¦è«–ç†ãŒæ„Ÿæƒ³ã«å°„å½±ã•ã‚Œã¾ã—ãŸã€‚`;
        }

        function shareOnX() {
            const text = encodeURIComponent(getShareText());
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${encodeURIComponent(SHARE_URL)}`, '_blank');
        }

        function shareOnLine() {
            const text = encodeURIComponent(getShareText() + "\n" + SHARE_URL);
            window.open(`https://social-plugins.line.me/lineit/share?url=${text}`, '_blank');
        }

        truthMeter.style.width = '100%';
    </script>
</body>
</html>
